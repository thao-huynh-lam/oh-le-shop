{"ast":null,"code":"import _objectSpread from \"D:\\\\HocReact\\\\ecommerce\\\\ecommerce-shopping-cart-master\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"D:\\\\HocReact\\\\ecommerce\\\\ecommerce-shopping-cart-master\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"D:\\\\HocReact\\\\ecommerce\\\\ecommerce-shopping-cart-master\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"D:\\\\HocReact\\\\ecommerce\\\\ecommerce-shopping-cart-master\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"D:\\\\HocReact\\\\ecommerce\\\\ecommerce-shopping-cart-master\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"D:\\\\HocReact\\\\ecommerce\\\\ecommerce-shopping-cart-master\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"D:\\\\HocReact\\\\ecommerce\\\\ecommerce-shopping-cart-master\\\\src\\\\App.js\";\nimport React, { Component } from \"react\";\nimport Products from \"./components/Products\";\nimport Filter from \"./components/Filter\";\nimport Basket from \"./components/Basket\";\nimport \"./App.css\";\n\nvar App = /*#__PURE__*/function (_Component) {\n  _inherits(App, _Component);\n\n  function App() {\n    var _this;\n\n    _classCallCheck(this, App);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(App).call(this));\n\n    _this.handleRemoveFromCart = function (e, product) {\n      _this.setState(function (state) {\n        var cartItems = state.cartItems.filter(function (a) {\n          return a.id !== product.id;\n        });\n        localStorage.setItem(\"cartItems\", JSON.stringify(cartItems));\n        return {\n          cartItems: cartItems\n        };\n      });\n    };\n\n    _this.handleAddToCart = function (e, product) {\n      _this.setState(function (state) {\n        var cartItems = state.cartItems;\n        var productAlreadyInCart = false;\n        cartItems.forEach(function (cp) {\n          if (cp.id === product.id) {\n            cp.count += 1;\n            productAlreadyInCart = true;\n          }\n        });\n\n        if (!productAlreadyInCart) {\n          cartItems.push(_objectSpread({}, product, {\n            count: 1\n          }));\n        }\n\n        localStorage.setItem(\"cartItems\", JSON.stringify(cartItems));\n        return {\n          cartItems: cartItems\n        };\n      });\n    };\n\n    _this.listProducts = function () {\n      _this.setState(function (state) {\n        if (state.sort !== \"\") {\n          state.products.sort(function (a, b) {\n            return state.sort === \"lowestprice\" ? a.price > b.price ? 1 : -1 : a.price < b.price ? 1 : -1;\n          });\n        } else {\n          state.products.sort(function (a, b) {\n            return a.id > b.id ? 1 : -1;\n          });\n        }\n\n        if (state.size !== \"\") {\n          return {\n            filteredProducts: state.products.filter(function (a) {\n              return a.availableSizes.indexOf(state.size.toUpperCase()) >= 0;\n            })\n          };\n        }\n\n        return {\n          filteredProducts: state.products\n        };\n      });\n    };\n\n    _this.handleSortChange = function (e) {\n      _this.setState({\n        sort: e.target.value\n      });\n\n      _this.listProducts();\n    };\n\n    _this.handleSizeChange = function (e) {\n      _this.setState({\n        size: e.target.value\n      });\n\n      _this.listProducts();\n    };\n\n    _this.state = {\n      size: \"\",\n      sort: \"\",\n      cartItems: [],\n      products: [],\n      filteredProducts: []\n    };\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      var _this2 = this;\n\n      if (localStorage.getItem(\"cartItems\")) {\n        this.setState({\n          cartItems: JSON.parse(localStorage.getItem(\"cartItems\"))\n        });\n      }\n\n      fetch(\"http://localhost:8000/products\").then(function (res) {\n        return res.json();\n      }).catch(function (err) {\n        return fetch(\"db.json\").then(function (res) {\n          return res.json();\n        }).then(function (data) {\n          return data.products;\n        });\n      }).then(function (data) {\n        _this2.setState({\n          products: data\n        });\n\n        _this2.listProducts();\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"container\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"h1\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 9\n        }\n      }, \"Linda Hat Shop\"), /*#__PURE__*/React.createElement(\"hr\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 9\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"row\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-md-9\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(Filter, {\n        count: this.state.filteredProducts.length,\n        handleSortChange: this.handleSortChange,\n        handleSizeChange: this.handleSizeChange,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 13\n        }\n      }), /*#__PURE__*/React.createElement(\"hr\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 13\n        }\n      }), /*#__PURE__*/React.createElement(Products, {\n        products: this.state.filteredProducts,\n        handleAddToCart: this.handleAddToCart,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 13\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-md-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(Basket, {\n        cartItems: this.state.cartItems,\n        handleRemoveFromCart: this.handleRemoveFromCart,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 13\n        }\n      }))));\n    }\n  }]);\n\n  return App;\n}(Component);\n\nexport default App;","map":{"version":3,"sources":["D:/HocReact/ecommerce/ecommerce-shopping-cart-master/src/App.js"],"names":["React","Component","Products","Filter","Basket","App","handleRemoveFromCart","e","product","setState","state","cartItems","filter","a","id","localStorage","setItem","JSON","stringify","handleAddToCart","productAlreadyInCart","forEach","cp","count","push","listProducts","sort","products","b","price","size","filteredProducts","availableSizes","indexOf","toUpperCase","handleSortChange","target","value","handleSizeChange","getItem","parse","fetch","then","res","json","catch","err","data","length"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport Products from \"./components/Products\";\nimport Filter from \"./components/Filter\";\nimport Basket from \"./components/Basket\";\n\nimport \"./App.css\";\n\n\nclass App extends Component {\n  constructor() {\n    super();\n    this.state = {\n      size: \"\",\n      sort: \"\",\n      cartItems: [],\n      products: [],\n      filteredProducts: []\n    };\n  }\n  componentWillMount() {\n    if (localStorage.getItem(\"cartItems\")) {\n      this.setState({\n        cartItems: JSON.parse(localStorage.getItem(\"cartItems\"))\n      });\n    }\n\n    fetch(\"http://localhost:8000/products\")\n      .then(res => res.json())\n      .catch(err =>\n        fetch(\"db.json\")\n          .then(res => res.json())\n          .then(data => data.products)\n      )\n      .then(data => {\n        this.setState({ products: data });\n        this.listProducts();\n      });\n  }\n\n  handleRemoveFromCart = (e, product) => {\n    this.setState(state => {\n      const cartItems = state.cartItems.filter(a => a.id !== product.id);\n      localStorage.setItem(\"cartItems\", JSON.stringify(cartItems));\n      return { cartItems: cartItems };\n    });\n  };\n\n  handleAddToCart = (e, product) => {\n    this.setState(state => {\n      const cartItems = state.cartItems;\n      let productAlreadyInCart = false;\n\n      cartItems.forEach(cp => {\n        if (cp.id === product.id) {\n          cp.count += 1;\n          productAlreadyInCart = true;\n        }\n      });\n\n      if (!productAlreadyInCart) {\n        cartItems.push({ ...product, count: 1 });\n      }\n      localStorage.setItem(\"cartItems\", JSON.stringify(cartItems));\n      return { cartItems: cartItems };\n    });\n  };\n\n  listProducts = () => {\n    this.setState(state => {\n      if (state.sort !== \"\") {\n        state.products.sort((a, b) =>\n          state.sort === \"lowestprice\"\n            ? a.price > b.price\n              ? 1\n              : -1\n            : a.price < b.price\n            ? 1\n            : -1\n        );\n      } else {\n        state.products.sort((a, b) => (a.id > b.id ? 1 : -1));\n      }\n      if (state.size !== \"\") {\n        return {\n          filteredProducts: state.products.filter(\n            a => a.availableSizes.indexOf(state.size.toUpperCase()) >= 0\n          )\n        };\n      }\n      return { filteredProducts: state.products };\n    });\n  };\n  handleSortChange = e => {\n    this.setState({ sort: e.target.value });\n    this.listProducts();\n  };\n  handleSizeChange = e => {\n    this.setState({ size: e.target.value });\n    this.listProducts();\n  };\n\n  render() {\n    return (\n      <div className=\"container\">\n        <h1>Linda Hat Shop</h1>\n        <hr />\n        <div className=\"row\">\n          <div className=\"col-md-9\">\n            <Filter\n              count={this.state.filteredProducts.length}\n              handleSortChange={this.handleSortChange}\n              handleSizeChange={this.handleSizeChange}\n            />\n            <hr />\n            <Products\n              products={this.state.filteredProducts}\n              handleAddToCart={this.handleAddToCart}\n            />\n          </div>\n          <div className=\"col-md-3\">\n            <Basket\n              cartItems={this.state.cartItems}\n              handleRemoveFromCart={this.handleRemoveFromCart}\n            />\n            \n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}